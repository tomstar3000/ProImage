(function(b,c){var a=b.Aurigma?b.Aurigma.ImageUploader||{}:{};a.nirvanixExtender=function(b){if(!(this instanceof a.nirvanixExtender))return new a.nirvanixExtender(b);b.state()==1&&a.debug().showError("NirvanixExtender should be created before uploader initialization.");b.uploadSettings().actionUrl("http://localhost");this._uploader=b;this._serviceError=new a.event;var c=this;b.events().beforeUpload().add(function(){return c._onBeforeUpload.apply(c,arguments)});b.events().beforePackageUpload().add(function(){return c._onBeforePackageUpload.apply(c,arguments)});b.events().afterPackageUpload().add(function(){return c._onAfterPackageUpload.apply(c,arguments)});this._errors={"100":"MissingRequiredParameter","101":"InvalidParameter","160":"UnsupportedOperation","50103":"ParameterOutOfAcceptedRange","55001":"InvalidPayment","55100":"CreditCardChargeFailed","65001":"CreateAccountFailed","65002":"CreateAccountContactFailed","65003":"InvalidSlaError","65004":"InvalidAppKey","65005":"InvalidAccountType","65006":"DuplicateUserNameUnderAppKey","65007":"DuplicateAppName","65008":"PageSizeExceedsLimit","65009":"DeletedAccount","65010":"InvalidStatus","65011":"InvalidSecurityResponse","65012":"InvalidUserNameOrPassword","65016":"DuplicateMasterAccountUserName","65101":"InvalidContactParameter","65102":"AppNameNotFound","65104":"UserNameNotFound","70001":"FolderNotFound","70002":"FileNotFound","70003":"PathNotFound","70004":"AlreadyExists","70005":"InvalidPath","70006":"DownloadPathNotFound","70007":"MetadataDoesNotExist","70008":"FolderAlreadyExists","70009":"PathTooLong","70010":"FileFolderNameTooLong","70101":"NullOrEmptyPath","70102":"InvalidPathCharacter","70103":"InvalidAbsolutePath","70104":"InvalidRelativePath","70106":"FileIntegrityError","70107":"InvalidMetadata","70108":"RangeNotSatisfiable","70109":"PathTooShort","70110":"FileOffline","70111":"InvalidImageDimensions","80001":"LoginFailed","80003":"AccessDenied","80004":"InvalidMasterAccountID","80005":"InvalidBillableAccountID","80006":"SessionNotFound","80007":"AccountExpired","80015":"OutOfBytes","80016":"OutOfBytesNonOwner","80018":"InvalidIPAddress","80019":"DownloadFileSizeLimitExceeded","80020":"UploadBandwidthLimitExceeded","80021":"StorageLimitExceeded","80022":"LimitAlreadyExceeded","80023":"InvalidAccessToken","80101":"InvalidSessionToken","80102":"ExpiredAccessToken","80103":"InvalidDownloadToken","90001":"Configuration","90002":"SSLRequired","100001":"Database"}};a.nirvanixExtender.prototype={__class:true,_onBeforeUpload:function(){if(!this.uploadToken()||!this.uploadHost()||!this.destFolderPath()){a.debug().showError("You should specify UploadToken, UploadHost, and DestFolderPath for using NirvanixExtender");return false}this._uploader.uploadSettings().actionUrl(b.location.protocol+"//"+this.uploadHost()+"/Upload.ashx")},_onBeforePackageUpload:function(){var b=this._uploader,a=b.metadata();a.addCustomField("uploadToken",this.uploadToken());a.addCustomField("destFolderPath",this.destFolderPath())},_onAfterPackageUpload:function(m,i){var l=i+"",k=/<ResponseCode>\s*(\d+)\s*<\/ResponseCode>/ig;if(k.test(l)){var b=parseInt(RegExp.$1,10);if(b!=0)if(this._serviceError.count()>0){for(var f=this._serviceError,g=true,e=0,j=f.length;e<j;e++){var h=f[e]();g&=h==c||!!h}return g}else{var d=this._errors[b];if(d==c)d="Unknown";a.debug().showError("Error occured (#"+b+", "+d+") during an upload to Nirvanix service.");return true}}else{a.debug().showError("Unexpected response from Nirvanix service.");return true}},_prop:function(a,c,b){if(b)this["_"+a]=c;else return this["_"+a]},uploadToken:function(){return this._prop("uploadToken",arguments[0],arguments.length)},uploadHost:function(){return this._prop("uploadHost",arguments[0],arguments.length)},destFolderPath:function(){return this._prop("destFolderPath",arguments[0],arguments.length)},serviceError:function(){if(arguments.length==0)return this._serviceError;else this._serviceError.add(arguments[0])}};b.Aurigma=b.Aurigma||{__namespace:true};b.Aurigma.ImageUploader=a})(window)